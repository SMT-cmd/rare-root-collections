<!DOCTYPE html>
<html>
<head>
    <title>{{ page.title }} | RARE ROOT</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <script src="https://js.paystack.co/v1/inline.js"></script>
</head>
<body>
    <header>
        <h1 class="logo">RARE ROOT</h1>
        <p>EST. 2026 | LAGOS</p>
    </header>

    <div class="container">
        {{ content }}
    </div>

    <script>
        function payWithPaystack(amount, email, product) {
            let handler = PaystackPop.setup({
                key: 'YOUR_PUBLIC_KEY_HERE', // REPLACE THIS WITH YOUR KEY
                email: email,
                amount: amount * 100, // Paystack counts in kobo
                currency: "NGN",
                metadata: {
                    custom_fields: [
                        { display_name: "Product", variable_name: "product", value: product }
                    ]
                },
                callback: function(response) {
                    alert('Order Placed! Reference: ' + response.reference);
                    // Here we can redirect to a success page or WhatsApp
                    window.location.href = "https://wa.me/234XXXXXXXXXX?text=I just paid for " + product + ". Ref: " + response.reference;
                },
                onClose: function() {
                    alert('Transaction was not completed.');
                }
            });
            handler.openIframe();
        }

        // Simple Prompt to get email before paying
        function initiateBuy(price, productName) {
            let email = prompt("Please enter your email for receipt:");
            if (email) {
                payWithPaystack(price, email, productName);
            }
        }
    </script>
</body>
</html>
